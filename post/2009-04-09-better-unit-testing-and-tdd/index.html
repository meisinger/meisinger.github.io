<!doctype html><html lang=en-us><head><meta charset=utf-8><meta http-equiv=X-UA-Compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1"><meta property="og:site_name" content="Meisinger Two"><meta property="og:type" content="article"><meta property="og:image" content="https://meisinger.github.io//assets/images/header-code.jpg"><meta property="twitter:image" content="https://meisinger.github.io//assets/images/header-code.jpg"><meta name=title content="Better Unit Testing and TDD"><meta property="og:title" content="Better Unit Testing and TDD"><meta property="twitter:title" content="Better Unit Testing and TDD"><meta name=description content="A friendly blog covering my journey through software development over the past twenty years"><meta property="og:description" content="A friendly blog covering my journey through software development over the past twenty years"><meta property="twitter:description" content="A friendly blog covering my journey through software development over the past twenty years"><meta property="og:url" content="https://meisinger.github.io/post/2009-04-09-better-unit-testing-and-tdd/"><meta property="twitter:card" content="summary"><meta name=keyword content><link rel="shortcut icon" href=/img/favicon.ico><title>Better Unit Testing and TDD - Meisinger Two</title><link rel=canonical href=/post/2009-04-09-better-unit-testing-and-tdd/><link rel=stylesheet href=https://cdnjs.cloudflare.com/ajax/libs/font-awesome/7.0.0/css/all.min.css integrity=sha512-... crossorigin=anonymous referrerpolicy=no-referrer><link rel=stylesheet href=/scss/main.css></head><body><nav><div><div class=title-container><button type=button>
<span class=icon-bar></span>
<span class=icon-bar></span>
<span class=icon-bar></span>
</button>
<a class=site-title href=/>Meisinger Two
<span class=site-slogan>Soul Proprietor</span></a></div><div class=menu-items-container><ul class=menu-items><li><a href=/>Home</a></li><li><a href=/categories>Categories</a></li><li><a href=/tags>Tags</a></li><li><a href=/about>About</a></li></ul></div></div><script>var $toggle=document.querySelector(".navbar-toggle");$toggle.addEventListener("click",toggle_navbar);function toggle_navbar(){var t=document.querySelector("#huxblog_navbar"),n=document.querySelector(".navbar-collapse");t.className.indexOf("in")>0?(t.className=" ",setTimeout(function(){t.className.indexOf("in")<0&&(n.style.height="0px")},400)):(n.style.height="auto",t.className+=" in")}</script></nav><article><section class=header><h2 data-label=title>Better Unit Testing and TDD</h2><h6 data-label=reading-time><i class="fa fa-clock"></i>
5 minute read</h6></section><section class=content><p>I just got done watching <a href=http://blog.wekeroad.com/>Rob Conery&rsquo;s</a> latest installment in his <a href=http://blog.wekeroad.com/kona/kona-2>Kona</a> series.
I have to say that I like the direction that he is going with it and I hope that he continues producing great screen casts.</p><p>After watching the video, however, I noticed some of the comments that were made by others and started to get really frustrated over how developers
view unit testing and practicing TDD.</p><p><em>I am not saying that I am the end-all-be-all when it comes to unit testing and TDD.
Far from it&mldr; lord knows that I have worked on projects where I didn&rsquo;t produce a single unit
test and instead relied on firing up a browser and stepping through the application to &ldquo;test&rdquo; the code.</em></p><p>I guess the thing that frustrates me the most is when a developer decides to start practicing TDD or they decide that there is enough
benefit from writing unit tests only to later throw their hands up in disgust and (understandably) frustration when it is not working
the way they thought it would or how some other blogger showed them how easy it was to write unit tests and practice TDD.</p><p>It is my belief that most books, articles, screen casts, blog posts, etc&mldr; about unit testing and TDD take the wrong approach.
Sure, it would be totally awesome if we could all be put on &ldquo;green field&rdquo; projects and new code bases where we are starting from scratch.
The reality is, however, that most of us are brought on to existing projects and existing code bases where no testing has been done or if
it has&mldr; it has been abandoned.</p><p>So what is a developer to do? The answer is really simple&mldr; write unit tests and start practicing TDD.</p><p>The one part of Rob&rsquo;s screen cast that I liked was when he (quickly) covered the unit tests that he wrote for the existing Shopping Cart application.
While I wish he would have spent a little more time on it, I think that he really hit on what a developer should be doing when trying to write unit
tests and performing TDD on an existing code base.</p><h3 id=start-from-the-story-and-requirements>Start from the Story and Requirements</h3><p>The point of the matter is that if you start from the story, requirements, or business case then you can start to get a clearer understanding of what
it is that needs to be tested and where to start (regardless of if this a green field project or an existing code base).</p><p>Some times you might get stuck and not know where to start even after gathering the requirements or reading the stories.
This is a clear indication that you don&rsquo;t know the full story in which case you have a couple of options: 1) assume that you know what is going on or 2) ask.
I think where a lot of people get into trouble is when they start assuming things.</p><h3 id=assumptions---how-bad-tests-start>Assumptions - How bad Tests start</h3><p>Let&rsquo;s watch what happens when you assume (besides the age old saying of making an ass out of you and me).</p><p>You receive (or you read) a story which states &ldquo;the Company [object] must have the ability to add a User [object]&rdquo; and you go off and write the following code:</p><div class=highlight><pre tabindex=0 style=color:#c8d3f5;background-color:#222436;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-csharp data-lang=csharp><span style=display:flex><span><span style=color:#82aaff>[Test]</span>  
</span></span><span style=display:flex><span><span style=color:#c099ff>public</span> <span style=color:#c099ff>void</span> When_Adding_User_UserCount_Is_1() {  
</span></span><span style=display:flex><span>  <span style=color:#4fd6be>var</span> customer = <span style=color:#c099ff>new</span> Customer();  
</span></span><span style=display:flex><span>  <span style=color:#4fd6be>var</span> user = <span style=color:#c099ff>new</span> User();  
</span></span><span style=display:flex><span>  
</span></span><span style=display:flex><span>  customer.AddUser(user);  
</span></span><span style=display:flex><span>  Assert.AreEqual(<span style=color:#ffc777>1</span>, customer.UserCount);  
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><p>After you fix the compile errors, etc&mldr; you run the test and it fails since you have not implemented the <strong>AddUser</strong> method yet.
So you then start to implement the method and you assume that you are going to store the User in a collection.
You then further assume that you are going to want to retrieve the User so you decide to create a Dictionary.
You make another assumption that the Id property from the User will be used as the key for the Dictionary.
Remembering that you still have to satisfy the test, you change the <strong>UserCount</strong> property to return the count from the Dictionary.
Then finally&mldr; you make one last assumption, the <strong>GetUser</strong> method.
You write and implement the <strong>GetUser</strong> method to take an Integer and return the User object from the Dictionary.
Just to be safe, you write a test to prove that after you add the User, you can get the User from the Company object.</p><h3 id=assumptions---so-what-went-wrong>Assumptions - So what went wrong?</h3><p>So what went wrong here? Everything works and all of your tests pass so&mldr; what is the deal?</p><p>The assumptions are the deal. First you have assumed that you need to store the User in a collection.
Nothing about the story or requirement indicated that this needed to be done. After that assumption comes all of the other decisions that were not warranted.
Finally the big nasty assumption that the User will need to be retrieved and the API created to accomplish it.</p><p>With all of those assumptions made, you have coded and unit tested yourself and every other developer on your team (present and future) into a corner.
Not only is there no need to have a <strong>GetUser</strong> method at this time but you run the risk of the method becoming &ldquo;supported&rdquo; because other developers
now use it to get User objects.</p><p>What is worst of all is that there is code now available that isn&rsquo;t backed by a story or requirement.</p><p><strong>Conclusion</strong></p><p>So back to my original point. Writing unit tests and practicing TDD is not as hard as people make it out to be as long as you follow the stories and
requirements and don&rsquo;t make assumptions.</p><p>Perhaps that is wrong to state. Assumptions are fine when you are assuming how something will work like how the Customer object will be reconstituted
from a database some where. The details aren&rsquo;t important but it is safe to assume that there will be some data access method some where in the framework
or code that will handle the retrieval of the Customer object for you. Other assumptions that are integration assumptions are also fine since the details
have more than likely not been ironed out yet.</p><p>Assumptions about the test and the functionality needed for the application, however, are bad</p></section><section class=footer><div class=tags><label>Tags:</label><div data-type=taxonomy><a href=/tags/tdd title=TDD>TDD</a></div><div data-type=taxonomy><a href=/tags/unit-testing title="Unit Testing">Unit Testing</a></div></div><div class=categories><label>Categories:</label><div data-type=taxonomy><a href=/categories/development title=Development>Development</a></div></div><h6 data-label=meta>Posted on Thursday, April 9, 2009</h6></section><section class=navigation><a href=/post/2009-03-12-nothing-lost-but-time/>Previous
</a><a href=/post/2009-04-29-solid-open-closed-principle-ocp/>Next</a></section></article><footer><ul><li><a href=mailto:mike.meisinger@gmail.com><span class="fa-stack fa-lg"><i class="fas fa-circle fa-stack-2x"></i>
<i class="fas fa-envelope fa-stack-1x fa-inverse"></i></span></a></li><li><a target=_blank href=https://github.com/meisinger><span class="fa-stack fa-lg"><i class="fas fa-circle fa-stack-2x"></i>
<i class="fab fa-github fa-stack-1x fa-inverse"></i></span></a></li><li><a target=_blank href=https://www.linkedin.com/in/yourlinkedinid><span class="fa-stack fa-lg"><i class="fas fa-circle fa-stack-2x"></i>
<i class="fab fa-linkedin fa-stack-1x fa-inverse"></i></span></a></li></ul><div data-label=copyright>Copyright &copy; 2025 Mike Meisinger</div></footer></body></html>