<!doctype html><html lang=en-us><head><meta charset=utf-8><meta http-equiv=X-UA-Compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1"><meta property="og:site_name" content="Meisinger Two"><meta property="og:type" content="article"><meta property="og:image" content="https://meisinger.github.io//assets/images/header-code.jpg"><meta property="twitter:image" content="https://meisinger.github.io//assets/images/header-code.jpg"><meta name=title content="Getting the Hook"><meta property="og:title" content="Getting the Hook"><meta property="twitter:title" content="Getting the Hook"><meta name=description content="A friendly blog covering my journey through software development over the past twenty years"><meta property="og:description" content="A friendly blog covering my journey through software development over the past twenty years"><meta property="twitter:description" content="A friendly blog covering my journey through software development over the past twenty years"><meta property="og:url" content="https://meisinger.github.io/post/2020-03-01-venture-into-the-unknown/"><meta property="twitter:card" content="summary"><meta name=keyword content><link rel="shortcut icon" href=/img/favicon.ico><title>Getting the Hook - Meisinger Two</title><link rel=canonical href=/post/2020-03-01-venture-into-the-unknown/><link rel=stylesheet href=https://cdnjs.cloudflare.com/ajax/libs/font-awesome/7.0.0/css/all.min.css integrity=sha512-... crossorigin=anonymous referrerpolicy=no-referrer><link rel=stylesheet href=/scss/main.css></head><body><nav><div><div class=title-container><button type=button>
<span class=icon-bar></span>
<span class=icon-bar></span>
<span class=icon-bar></span>
</button>
<a class=site-title href=/>Meisinger Two
<span class=site-slogan>Soul Proprietor</span></a></div><div class=menu-items-container><ul class=menu-items><li><a href=/>Home</a></li><li><a href=/categories>Categories</a></li><li><a href=/tags>Tags</a></li><li><a href=/about>About</a></li></ul></div></div><script>var $toggle=document.querySelector(".navbar-toggle");$toggle.addEventListener("click",toggle_navbar);function toggle_navbar(){var t=document.querySelector("#huxblog_navbar"),n=document.querySelector(".navbar-collapse");t.className.indexOf("in")>0?(t.className=" ",setTimeout(function(){t.className.indexOf("in")<0&&(n.style.height="0px")},400)):(n.style.height="auto",t.className+=" in")}</script></nav><article><section class=header><h2 data-label=title>Getting the Hook</h2><h6 data-label=reading-time><i class="fa fa-clock"></i>
5 minute read</h6></section><section class=content><p>If you have been ignoring the Functional Component aspect of React and only working with Class Components, you might have
missed the <code>Hook</code> revolution.</p><p>One of the reasons why I focused on Class Components, and payed little attention to Fuctional Components, was the ability
to &ldquo;hook&rdquo; into the <code>Component Lifecycle</code>. Most of the time I was living in three methods: <code>constructor</code>, <code>componentDidMount</code> and
<code>componentWillUnmount</code> methods. Setting up my state in the <code>constructor</code>, making all of my subscription calls in
<code>componentDidMount</code> and cleaning everything up in <code>componentWillUnmount</code>.</p><p>To me, Fuctional Components were only used for stateless and &ldquo;pure&rdquo; components. As soon as one of these components needed
to setup a subscription, back it went to the Class Component. I believe there we times I would code the following in my
sleep simply due to the number of times it was written:</p><div class=highlight><pre tabindex=0 style=color:#c8d3f5;background-color:#222436;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-js data-lang=js><span style=display:flex><span><span style=color:#c099ff>export</span> <span style=color:#c099ff>default</span> <span style=color:#c099ff>new</span> <span style=color:#c099ff>class</span> <span style=color:#c099ff>extends</span> React.Component {
</span></span><span style=display:flex><span>  constructor(props) {
</span></span><span style=display:flex><span>    <span style=color:#c099ff>super</span>(props)
</span></span><span style=display:flex><span>  }
</span></span><span style=display:flex><span>}</span></span></code></pre></div><p>When I found the <code>Hook</code> paradigm, it changed my perspective on everything React related.</p><h2 id=lets-use-this>Let&rsquo;s <code>use</code> this</h2><p>The <code>Hook</code> paradigm exposes a few fuctions that really turn things on their head:</p><ul><li><code>useState</code></li><li><code>useEffect</code></li></ul><p>There are a few others that we can get into later but for now, these are the two that you will likely use the most.
At least initially any way.</p><h2 id=state-the-obvious>State the Obvious</h2><p>The <code>useState</code> replaces the need to create your state within the <code>constructor</code>. Before, we typically would create our state
in the following manner.</p><div class=highlight><pre tabindex=0 style=color:#c8d3f5;background-color:#222436;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-js data-lang=js><span style=display:flex><span>constructor(props) {
</span></span><span style=display:flex><span>  <span style=color:#c099ff>super</span>(props)
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  <span style=color:#c099ff>this</span>.state <span style=color:#c3e88d;font-weight:700>=</span> { active<span style=color:#c3e88d;font-weight:700>:</span> <span style=color:#ffc777>true</span> }
</span></span><span style=display:flex><span>}</span></span></code></pre></div><p>With the <code>useState</code> hook, that changes to the following</p><div class=highlight><pre tabindex=0 style=color:#c8d3f5;background-color:#222436;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-js data-lang=js><span style=display:flex><span><span style=color:#c099ff>const</span> [active, setActive] <span style=color:#c3e88d;font-weight:700>=</span> useState(<span style=color:#ffc777>true</span>)</span></span></code></pre></div><p>It should be fairly easy to gather what is happening in those two code blocks. Both are creating state where &ldquo;active&rdquo; will
be tracked and maintained across renderings. Both are also setting &ldquo;active&rdquo; to a value of &ldquo;true&rdquo; initially.</p><p>What may not be obvious at first is what is being returned from the <code>useState</code> function. The <code>useState</code> function returns an array
where the first item is the the state and the second item is a function use to modify or change the state. Simple.</p><p>A few subtle things to cover here. First, I can stop using <code>this.state</code> since the state is not a local variable.
You might also miss being able to call a function after the state was updated with the <code>setState</code> function but,
you can simple use an effect to handle that instead.</p><h2 id=affect-the-effect>Affect the Effect</h2><p>The <code>useEffect</code> hook gives us the ability to call functions and methods that produce side effects. Well that clears everything up
now doesn&rsquo;t it? What the hell is a side effect?</p><p>A &ldquo;side effect&rdquo; is really anything that changes something else (way over simplified). Consider the variable <code>foo</code>. If the value of
<code>foo</code> is changed from <code>bar</code> to <code>baz</code> then we have created a &ldquo;side effect.&rdquo; In other words, the value of the variable has changed.</p><p>If we take a cue from Functional Programming, a function that requires or accesses data outside of its given parameters is
consider to have side effects. And while we can debate the validity and practicality of this, it serves to prove our point and
show how <code>useEffect</code> can be applied.</p><div class=highlight><pre tabindex=0 style=color:#c8d3f5;background-color:#222436;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-js data-lang=js><span style=display:flex><span><span style=color:#c099ff>const</span> NameBadge <span style=color:#c3e88d;font-weight:700>=</span> ({ id, onClick }) =&gt; {
</span></span><span style=display:flex><span>  <span style=color:#c099ff>const</span> [name, setName] <span style=color:#c3e88d;font-weight:700>=</span> useState(<span style=color:#ffc777>null</span>)
</span></span><span style=display:flex><span>  useEffect(() =&gt; {
</span></span><span style=display:flex><span>    <span style=color:#c099ff>const</span> load <span style=color:#c3e88d;font-weight:700>=</span> <span style=color:#c099ff>async</span> () =&gt; {
</span></span><span style=display:flex><span>      <span style=color:#c099ff>const</span> data <span style=color:#c3e88d;font-weight:700>=</span> <span style=color:#c099ff>await</span> getNameFromId(id)
</span></span><span style=display:flex><span>      setName(data)
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    load()
</span></span><span style=display:flex><span>  }, [id])
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  <span style=color:#c099ff>if</span> (<span style=color:#c3e88d;font-weight:700>!</span>name)
</span></span><span style=display:flex><span>    <span style=color:#c099ff>return</span> <span style=color:#ffc777>null</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  <span style=color:#c099ff>return</span> (
</span></span><span style=display:flex><span>    <span style=color:#c3e88d;font-weight:700>&lt;</span>div className<span style=color:#c3e88d;font-weight:700>=</span>{<span style=color:#c3e88d>&#39;badge&#39;</span>}<span style=color:#c3e88d;font-weight:700>&gt;</span>
</span></span><span style=display:flex><span>      <span style=color:#c3e88d;font-weight:700>&lt;</span>div onClick<span style=color:#c3e88d;font-weight:700>=</span>{() =&gt; onClick(id)}<span style=color:#c3e88d;font-weight:700>&gt;</span>{name}<span style=color:#c3e88d;font-weight:700>&lt;</span><span style=color:#c53b53>/div&gt;</span>
</span></span><span style=display:flex><span>    <span style=color:#c3e88d;font-weight:700>&lt;</span><span style=color:#c53b53>/div&gt;</span>
</span></span><span style=display:flex><span>  )
</span></span><span style=display:flex><span>}</span></span></code></pre></div><p>In this example, <code>getNameFromId</code> gets the name from some external data source.</p><p>If we look a little deeper into the <code>useEffect</code> method, we see that it has two parameters. The first is the method or function
that should be executed. The second is an array but it isn&rsquo;t really clear what it does.</p><p>The second parameter to the <code>useEffect</code> method as a &ldquo;dependency list&rdquo; of sorts with a few special rules that help dictate
when the given function is executed:</p><ul><li>If omitted, execute for every update, state or parameter change</li><li>If an empty array, execute once when the component is mounted</li><li>Otherwise, execute if any of the given dependencies change</li></ul><p>In our example, the <code>id</code> parameter is a dependency so the function will be executed only when the <code>id</code> parameter changes.
When it does change the function is called which calls <code>setName</code> which updates the <code>name</code> state and causes the component
to re-render.</p><p>One thing not shown is the <code>useEffect</code> actually expects a function to be returned. This function is called by React only
when the given function is called and after the component has rendered.</p><p>Perhaps an example is best served. I am a huge RxJS fan so using subscriptions is the easiest example I can think of:</p><div class=highlight><pre tabindex=0 style=color:#c8d3f5;background-color:#222436;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-js data-lang=js><span style=display:flex><span><span style=color:#c099ff>const</span> NameBadge <span style=color:#c3e88d;font-weight:700>=</span> ({ id, onClick }) =&gt; {
</span></span><span style=display:flex><span>  <span style=color:#c099ff>const</span> [name, setName] <span style=color:#c3e88d;font-weight:700>=</span> useState(<span style=color:#ffc777>null</span>)
</span></span><span style=display:flex><span>  useEffect(() =&gt; {
</span></span><span style=display:flex><span>    <span style=color:#c099ff>const</span> stream$ <span style=color:#c3e88d;font-weight:700>=</span> getNameFromId(id)
</span></span><span style=display:flex><span>      .subscribe(data =&gt; setName(data))
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#c099ff>return</span> () =&gt; stream$.unsubscribe()
</span></span><span style=display:flex><span>  }, [id])
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  <span style=color:#c099ff>if</span> (<span style=color:#c3e88d;font-weight:700>!</span>name)
</span></span><span style=display:flex><span>    <span style=color:#c099ff>return</span> <span style=color:#ffc777>null</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  <span style=color:#c099ff>return</span> (
</span></span><span style=display:flex><span>    <span style=color:#c3e88d;font-weight:700>&lt;</span>div className<span style=color:#c3e88d;font-weight:700>=</span>{<span style=color:#c3e88d>&#39;badge&#39;</span>}<span style=color:#c3e88d;font-weight:700>&gt;</span>
</span></span><span style=display:flex><span>      <span style=color:#c3e88d;font-weight:700>&lt;</span>div onClick<span style=color:#c3e88d;font-weight:700>=</span>{() =&gt; onClick(id)}<span style=color:#c3e88d;font-weight:700>&gt;</span>{name}<span style=color:#c3e88d;font-weight:700>&lt;</span><span style=color:#c53b53>/div&gt;</span>
</span></span><span style=display:flex><span>    <span style=color:#c3e88d;font-weight:700>&lt;</span><span style=color:#c53b53>/div&gt;</span>
</span></span><span style=display:flex><span>  )
</span></span><span style=display:flex><span>}</span></span></code></pre></div><p>As you can see we return a function that cleans up the subscription by calling <code>unsubscribe</code>.</p><h2 id=hooks-rule><code>Hooks</code> Rule</h2><p>It&rsquo;s interesting to note that &ldquo;hooks&rdquo; have two rules for when and where you can use them. The rules are simple to
remember:</p><ul><li>Only call hooks at the Top Level</li><li>Only call hooks from React Functions</li></ul><p>The first rule makes sense. Basically, don&rsquo;t call &ldquo;hooks&rdquo; within loops or or nested functions. The second rule ensures you don&rsquo;t
try to use &ldquo;hooks&rdquo; within the Class paradigm. That&rsquo;s it.</p><p>Next up, we&rsquo;ll cover one of my favorite things about the new &ldquo;Hook&rdquo; paradigm, custom hooks.</p></section><section class=footer><div class=tags><label>Tags:</label><div data-type=taxonomy><a href=/tags/react title=React>React</a></div><div data-type=taxonomy><a href=/tags/react-native title=React-Native>React-Native</a></div></div><div class=categories><label>Categories:</label><div data-type=taxonomy><a href=/categories/development title=Development>Development</a></div></div><h6 data-label=meta>Posted on Sunday, March 1, 2020</h6></section><section class=navigation><a href=/post/2014-07-22-becoming-a-motivated-vagrant/>Previous
</a><a href=/post/2020-03-04-creating-hooks/>Next</a></section></article><footer><ul><li><a href=mailto:mike.meisinger@gmail.com><span class="fa-stack fa-lg"><i class="fas fa-circle fa-stack-2x"></i>
<i class="fas fa-envelope fa-stack-1x fa-inverse"></i></span></a></li><li><a target=_blank href=https://github.com/meisinger><span class="fa-stack fa-lg"><i class="fas fa-circle fa-stack-2x"></i>
<i class="fab fa-github fa-stack-1x fa-inverse"></i></span></a></li><li><a target=_blank href=https://www.linkedin.com/in/yourlinkedinid><span class="fa-stack fa-lg"><i class="fas fa-circle fa-stack-2x"></i>
<i class="fab fa-linkedin fa-stack-1x fa-inverse"></i></span></a></li></ul><div data-label=copyright>Copyright &copy; 2025 Mike Meisinger</div></footer></body></html>